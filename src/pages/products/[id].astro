---
import Layout from '../../layouts/Layout.astro';

export function getStaticPaths() {
	return [
		{ params: { id: '1' } },
		{ params: { id: '2' } },
		{ params: { id: '3' } },
	];
}

const { id } = Astro.params;

const products = [
	{ id: 1, name: 'Product 1', price: 19.99, image: 'https://via.placeholder.com/400', description: 'This is product 1' },
	{ id: 2, name: 'Product 2', price: 29.99, image: 'https://via.placeholder.com/400', description: 'This is product 2' },
	{ id: 3, name: 'Product 3', price: 39.99, image: 'https://via.placeholder.com/400', description: 'This is product 3' },
];

const product = products.find(p => p.id === parseInt(id));
---

<Layout title={product.name}>
	<div class="product-detail">
		<img src={product.image} alt={product.name} />
		<h1>{product.name}</h1>
		<p class="price">${product.price.toFixed(2)}</p>
		<p class="description">{product.description}</p>
		<button id="add-to-cart" data-product={JSON.stringify(product)}>Add to Cart</button>
	</div>
</Layout>

<style>
	.product-detail {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 1rem;
	}
	.product-detail img {
		max-width: 100%;
		height: auto;
	}
	.price {
		font-size: 1.5rem;
		font-weight: bold;
	}
	.description {
		text-align: center;
		max-width: 600px;
	}
	button {
		padding: 0.5rem 1rem;
		background-color: #333;
		color: white;
		border: none;
		border-radius: 4px;
		cursor: pointer;
		font-size: 1rem;
	}
</style>

<script>
	import { addToCart } from '../../scripts/cart.js';

	document.getElementById('add-to-cart').addEventListener('click', (e) => {
		const product = JSON.parse(e.target.dataset.product);
		addToCart(product);
		alert('Product added to cart!');
	});
</script>